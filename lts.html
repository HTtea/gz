<!DOCTYPE html>
<html>
<head>
	<title>JSON to HTML</title>
</head>
<body>
	<h1>Bilibili动态</h1>
	<table id="dynamic-table">
		<thead>
			<tr>
				<th>发布时间</th>
				<th>动态内容</th>
			</tr>
		</thead>
		<tbody></tbody>
	</table>
	<script>
		const apiUrl = "https://api.bilibili.com/x/web-interface/dynamic/region?&jsonp=jsonp&ps=10&rid=1";

		fetch(apiUrl)
			.then => response.json())
			.then(data => {
				const dynamicTable = document.getElementById("dynamic-table");
				const dynamicTableBody = dynamicTable.getElementsByTagName("tbody")[0];

				data.data.archives.forEach(archive => {
					const = dynamicTableBody.insertRow(-1);
					const cell1 = row.insertCell(0);
					const cell2 = row.insertCell(1);
	cell1.innerHTML = new Date(archive.pubdate * 1000).toLocaleString();
					cell2.innerHTML = archive.title;
				});
			})
			.catch(error => console.error(error));
	</script>
</body>
</html>
